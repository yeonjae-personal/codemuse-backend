<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2023. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
  ~ Morbi non lorem porttitor neque feugiat blandit. Ut vitae ipsum eget quam lacinia accumsan.
  ~ Etiam sed turpis ac ipsum condimentum fringilla. Maecenas magna.
  ~ Proin dapibus sapien vel ante. Aliquam erat volutpat. Pellentesque sagittis ligula eget metus.
  ~ Vestibulum commodo. Ut rhoncus gravida arcu.
  -->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ui-dsbd-view-m">

	<select id="findByProperties" resultType="com.lgcns.svcp.prod.entity.DsbdViewEntity">
		SELECT dsbd_view_uuid, dsbd_view_dscr, dsbd_view_sort_no
			   ,dsbd_view_code, dsbd_view_name, ctgr_type_code
			   ,rgst_user, rgst_dtm, upd_user, upd_dtm
        FROM tb_dsbd_view_m WHERE 1 = 1
        <if test="dsbdViewUuid != null">
				and dsbd_view_uuid = #{dsbdViewUuid}
		</if>
		<if test="code != null">
				and dsbd_view_code = #{code}
		</if>
        <if test="useYn != null">
				and use_yn = #{useYn}
		</if>
	</select>
	
	<select id="findListDsbdView" resultType="com.lgcns.svcp.prod.entity.external.DsbdListViewEntity">
		SELECT
			 v.dsbd_view_uuid, v.dsbd_view_dscr
			 , v.dsbd_view_name, v.dsbd_view_code
			 , vp.pos_x, vp.pos_y 
		FROM
			 tb_dsbd_view_m v
		INNER JOIN
			 tb_dsbd_view_pst_d vp ON v.dsbd_view_uuid = vp.dsbd_view_uuid		        
		where vp.user_id = #{userId}  
	</select>
</mapper>